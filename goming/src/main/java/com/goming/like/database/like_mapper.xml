<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- mapper : 순수 sql문만 작성 xml이 하나가 아닐 수 있다 = 여러 개 만들어도 무관 원호쌤 추천 : 테이블마다 
	한 개의 mapper 만들기 mapper 사이에 sql문 작성해야 함 -->

<mapper namespace="com.goming.like.database.like_mapper">
		
<insert id="likeInsert" parameterType="com.goming.like.model.LikeDTO">
	INSERT INTO like_info (post_idx, user_email, created_at) 
	VALUES (#{post_idx}, #{user_email}, NOW());
</insert>


<select id="check_like" parameterType="com.goming.like.model.LikeDTO" resultType="com.goming.like.model.LikeDTO">
	SELECT *
  	FROM like_info
 	WHERE user_email = #{user_email} 
 	AND post_idx = (SELECT post_idx FROM post_info WHERE post_img = #{post_img});
</select>



</mapper>